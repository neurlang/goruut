# Goruut Phonemization System - Documentation

## Overview

Goruut is an advanced open-source phonemization system that provides bidirectional conversion between written text and IPA phonetic representations. Designed for both research and production use, it offers:

- High-accuracy phonemization for 130+ languages
- Compact, efficient models that run on CPU
- Self-hostable architecture with no external dependencies
- Support for both word-level and sentence-level processing

## Core Capabilities

### 1. Phonemization (G2P)

Converts orthographic text to International Phonetic Alphabet (IPA) representations. Handles:

- Regular vocabulary words
- Out-of-vocabulary words through learned patterns
- Language-specific phonetic rules
- Homograph disambiguation (in supported languages only)
- Tonal languages

### 2. Dephonemization (P2G)

Reverse process that converts IPA back to written text. Features:

- Bidirectional consistency with phonemization
- Handling of multiple possible orthographic representations
- Context-aware disambiguation

### 3. Advanced Word Analysis

- Pronunciation explanation for OOV words
- Word decomposition explaning applied phonetic rules

## Language Support

Goruut provides specialized models for:

### Major Language Families

- Indo-European (English, Spanish, Hindi, Russian, ...)
- Sino-Tibetan (Mandarin, ...)
- Afro-Asiatic (Arabic, Hebrew, ...)
- Uralic (Finnish, Hungarian, ...)
- And 20+ other language families

### Special Features

- **English**: Full homograph support (e.g., "read" → /ɹiːd/ or /ɹɛd/)
- **Chinese**: Handles character input
- **Arabic**: Supports diacritic restoration
- **Dialects**: Separate models for major dialect groups

## Technical Architecture

### Learning System

Goruut uses a hybrid approach:

1. **Statistical Grammar Induction**
    - Automatically learns language-specific G2P/P2G rules
    - Builds prefix trees from training data
    - Identifies productive morphological patterns

2. **Hashtron Transformers**
    - Compact weightless networks using integer arithmetic
    - Specialized architectures for different tasks:
        - Phonemization (16-phoneme window)
        - Dephonemization (16-phoneme window)
        - Homograph disambiguation (16-word window)

### Model Specifications

| Component               | Layers | Attention Heads | Context Window      | Model Size |
|-------------------------|--------|-----------------|---------------------|------------|
| Phonemization           | 7      | 4               | 16 phonemes         | ~1.2MB     |
| Dephonemization         | 7      | 4               | 16 phonemes         | ~1.2MB     |
| Homograph Resolver      | 7      | 4               | 16 words            | ~1.0MB     |

## Training System

### Data Requirements

For each language, Goruut needs:

1. **Core Lexicon (dirty.tsv)**
    - Raw word-to-IPA mappings
    - Minimum: 10,000 entries recommended
    - Format: `word<tab>pronunciation`

2. **Aligned Subset (clean.tsv)**
    - High-quality aligned pairs 
    - Automatically generated by the system from `dirty.tsv`
    - Used for model training
    - Typically 20%-80% of core lexicon

3. **Homograph Data (multi.tsv) [Optional]**
    - Sentence-level examples
    - Format: `sentence<tab>pronunciation`

### Training Process

1. **Data Preparation**  
   `./cmd/analysis2/clean_language.sh French`

2. **Grammar Induction**  
   `./cmd/analysis2/train_language.sh French`

3. **Transformer Training**  
   `./cmd/backtest/train_homograph.sh English`

4. **Evaluation**  
   `./cmd/backtest/coverage.sh Spanish`

## API Reference

### HTTP Endpoints

1. **Phonemize Sentence**  
   POST /tts/phonemize/sentence  
   Content-Type: application/json
   
## Deployment Options

### Docker Quickstart

1. Clone repository  
`git clone https://github.com/neurlang/goruut.git`  
`cd goruut`

2. Build and run  
`docker compose up -d --build`

3. Verify  
`curl -X POST http://localhost:18080/tts/phonemize/sentence -H "Content-Type: application/json" -d '{"Language":"English","Sentence":"Test sentence"}'`

### Bare Metal Installation

1. **Requirements:**
 - Go 1.20+
 - Python 3.8+ (for inference only)
 - 2GB RAM minimum

2. **Installation:**  

 - `cd ./cmd/goruut`  
 - `go build`  
 - `./goruut --configfile ../../configs/config.json`

## Performance Characteristics

| Operation               | Avg Latency | Throughput | Memory Usage |
|-------------------------|-------------|------------|--------------|
| Word Phonemization      | 2.1ms       | 480 ops/s  | 12MB         |
| Sentence Processing     | 8.4ms       | 120 ops/s  | 18MB         |
| Dephonemization         | 3.7ms       | 270 ops/s  | 14MB         |

## Contribution Guide

### Adding New Languages

1. Create language directory in `dicts/`
2. Add training data:
 - dirty.tsv (required)
 - clean.tsv (recommended)
 - multi.tsv (optional for homographs)
3. Submit pull request

### Improving Existing Models

1. Fork repository
2. Train improved models using:  
`./cmd/analysis2/train_language.sh [LANGUAGE]`
3. Include validation results
4. Submit PR with new weight files

## Limitations and Roadmap

### Current Limitations

- No built-in number pronunciation
- Limited handling of abbreviations
- No automatic language detection

### Planned Features

- Numerics expression handling
- Abbreviations
- Improved OOV learning (reinforcement learning)
- Enhanced dialect blending

## Frequently Asked Questions

**Q:** How accurate is the English homograph handling?  
**A:** Current models achieve 85% accuracy on the Google Homograph Benchmark.

**Q:** Can I use this commercially?  
**A:** Yes, Goruut is licensed under MIT.

**Q:** What's the smallest language model?  
**A:** Most models are 0.8-1.5MB. The smallest is probably Esperanto at ~60KB.

**Q:** How often are models updated?  
**A:** We release quarterly updates with improved models.

## Support and Community

- GitHub Discussions: [https://github.com/neurlang/goruut/discussions](https://github.com/neurlang/goruut/discussions)
- Issue Tracker: [https://github.com/neurlang/goruut/issues](https://github.com/neurlang/goruut/issues)
- Contributor Chat: Discord invite in README.md

## License

MIT - See LICENSE file for complete terms.

